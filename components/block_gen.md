# Block Generation

The logic which is used to generate the rollup chain from L1.

## Glossary

- **Block Inputs**: All information in an Ethereum block required to generate the full block contents.
- **Feeds**: Streams of data which are composed to generate the block inputs.
- **Rollup Blockchain**: The rollup blocks generated by performing the rollup's state transition function over all block inputs.

## Summary

The rollup chain can be deterministically generated given an L1 Ethereum chain. The fact that the entire rollup chain can be generated based on L1 blocks is _what makes OE a rollup_. This process can be represented as:

```python
f(l1_blockchain) -> rollup_blockchain
```

In this document we define a block generation function which is designed to be simple, support a single sequencer, and .

1. Minimal.
2. Support sequencers and sequencer consensus.
3. Resilient to the sequencer losing connection to L1.

## Feeds

There are two feeds:

1. The deposit feed.
2. The sequencer feed.

The deposit feed is used to track information that is "deposited" from L1 and the sequencer feed contains all transactions submitted by the sequencer. When combined, these two **feeds** form the **block inputs**. First let's define the data-structures of each feed.

### Deposit Feed

There are 2 types of deposits:

1. User deposit - transactions which come from L1 contracts or EOAs.
2. Block deposit - there is 1 block deposit per L1 block. This sets the L1Timestamp, L1BlockNumber, L1BaseFee, and L1BlockHash.

These types are defined as follows:

```python
class Deposit:
    feedIndex: uint64
    GasLimit:  uint64

class UserDeposit(Deposit):
    isEOA:       bool
    l1TxOrigin:  Address
    target:      Address
    data:        bytes

class BlockDeposit(Deposit):
    blockHash:   bytes32
    blockNumber: uint64
    timestamp:   uint64
    baseFee:     uint64
```

This information is emitted as an event and can thereby be parsed from L1 blocks.

### Sequencer Feed

The sequencer posts data directly on chain in what are called "batches". These batches contain information used to generate potentially many rollup blocks.

The sequencer batch data is defined as:

# TODO. This is going to require some actual code writing.
BRB
